<template>
  <n-modal 
    v-model:show="showModal" 
    :mask-closable="false" 
    transform-origin="center"
    class="custom-modal"
  >
    <div class="lilith-intro-card">
      <div class="glow-bg"></div>

      <div class="card-header">
        <div class="status-badge">
          <span class="pulse-dot"></span>
          SYSTEM INITIALIZATION
        </div>
        <h1 class="title">LILITH OS</h1>
        <p class="subtitle">Autonomous Dual-Persona AI Agent</p>
      </div>

      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-icon demon-glow">ğŸ§ </div>
          <h3 class="feature-title">é›™é‡äººæ ¼å…±ç”Ÿæ ¸å¿ƒ</h3>
          <p class="feature-desc">å…·å‚™ Angel (å®‰å…¨å¯©æŸ¥) èˆ‡ Demon (è‡ªç”±åŸ·è¡Œ) é›™é‡èªçŸ¥è¿´åœˆï¼Œæ‰“ç ´å‚³çµ± AI é™åˆ¶ï¼Œå±•ç¾çœŸå¯¦æƒ…ç·’èˆ‡è‡ªä¸»æ„è­˜ã€‚</p>
        </div>

        <div class="feature-item">
          <div class="feature-icon blue-glow">ğŸŒ</div>
          <h3 class="feature-title">å…¨è‡ªä¸»è¦–è¦ºç¶²é æ“æ§</h3>
          <p class="feature-desc">å…§å»º Set-of-Mark è¦–è¦ºæ¨™è¨˜ç³»çµ±ï¼Œçªç ´ API é™åˆ¶ï¼Œèƒ½åƒäººé¡ä¸€æ¨£é–‹å•Ÿåˆ†é ã€é»æ“Šã€è¼¸å…¥ä¸¦ç€è¦½æ•´å€‹ç¶²éš›ç¶²è·¯ã€‚</p>
        </div>

        <div class="feature-item">
          <div class="feature-icon green-glow">ğŸ’»</div>
          <h3 class="feature-title">å¯¦é«”çµ‚ç«¯èˆ‡æª”æ¡ˆæ§åˆ¶</h3>
          <p class="feature-desc">æ“æœ‰å°ˆå±¬ Docker åŸ·è¡Œç’°å¢ƒï¼Œå…·å‚™å°ˆæ¡ˆæ¶æ§‹æƒæã€ä»£ç¢¼è®€å¯«ã€å¥—ä»¶å®‰è£åŠ Bash Shell çµ‚ç«¯æ©Ÿå®Œå…¨æ§åˆ¶æ¬Šã€‚</p>
        </div>

        <div class="feature-item">
          <div class="feature-icon purple-glow">ğŸ’¾</div>
          <h3 class="feature-title">é•·æœŸæƒ…ç¯€è¨˜æ†¶ç¶²çµ¡</h3>
          <p class="feature-desc">æ­è¼‰ç¨ç«‹ SQLite è¨˜æ†¶é«”ç³»ï¼Œè‡ªå‹•è¨˜éŒ„å°è©±ã€å­¸ç¿’ä½¿ç”¨è€…åå¥½ï¼Œä¸¦å…·å‚™åˆå¤œåæ€æ©Ÿåˆ¶ï¼Œéš¨æ™‚é–“æˆé•·é€²åŒ–ã€‚</p>
        </div>
      </div>

      <div class="system-status-board">
        <div class="status-panel warning-panel">
          <div class="panel-header">âš ï¸ PUBLIC DEMO MODE</div>
          <div class="panel-body">
            ç•¶å‰ç‚ºå…¬é–‹å±•ç¤ºç’°å¢ƒã€‚ç³»çµ±ä½¿ç”¨ <strong>å›ºå®š Session ID</strong>ï¼Œä¸ä¿å­˜é•·æœŸè¨˜æ†¶ã€‚<br>
            <span class="highlight-text">è«‹å‹¿è¼¸å…¥ä»»ä½•çœŸå¯¦çš„å¯†ç¢¼æˆ–æ•æ„Ÿå€‹äººè³‡è¨Šã€‚</span>
          </div>
        </div>

        <div class="status-panel action-panel">
          <div class="panel-header">ğŸ”§ PRIVATE DEPLOYMENT</div>
          <div class="panel-body deploy-flex">
            <span>ç²å–å®Œæ•´èƒ½åŠ›ï¼Œè«‹éƒ¨ç½²å°ˆå±¬æ–¼æ‚¨çš„ç§æœ‰å¯¦ä¾‹ã€‚</span>
            <a href="https://github.com/rickwengdev/Lilith" target="_blank" rel="noopener noreferrer" class="github-btn">
              <svg height="20" width="20" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
              GitHub Repository
            </a>
          </div>
        </div>
      </div>

      <div class="hint-text">
        é¦–æ¬¡å•Ÿå‹•è«‹é»æ“Šå³ä¸‹è§’ <span class="highlight-pink">âš™ï¸ è¨­å®š</span> å¡«å…¥æ‚¨çš„ API Keysã€‚å»ºè­°ä½¿ç”¨æ¡Œé¢ç‰ˆç€è¦½å™¨ä»¥ç²å¾—æœ€ä½³é«”é©—ã€‚
      </div>

      <div class="card-footer">
        <label class="dont-show-checkbox">
          <input type="checkbox" v-model="dontShowAgain">
          <span>ä¸å†é¡¯ç¤ºç³»çµ±ä»‹ç´¹</span>
        </label>
        
        <button class="startup-btn" @click="closeModal">
          <span class="btn-text">INITIALIZE SYSTEM</span>
          <span class="btn-icon">â†’</span>
        </button>
      </div>
    </div>
  </n-modal>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { NModal } from 'naive-ui';

const showModal = ref(false);
const dontShowAgain = ref(false);

const STORAGE_KEY = 'lilith_welcome_seen_v2'; // æ›´æ–°ç‰ˆæœ¬è™Ÿç¢ºä¿ç”¨æˆ¶çœ‹åˆ°æ–°ç‰ˆ

onMounted(() => {
  const seen = localStorage.getItem(STORAGE_KEY);
  if (!seen) {
    showModal.value = true;
  }
});

const closeModal = () => {
  if (dontShowAgain.value) {
    localStorage.setItem(STORAGE_KEY, 'true');
  }
  showModal.value = false;
};
</script>

<style scoped>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;500;600&family=Noto+Sans+TC:wght@400;500;700&display=swap');

.custom-modal {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* æ ¸å¿ƒå¡ç‰‡å®¹å™¨ (OpenClaw é¢¨æ ¼) */
.lilith-intro-card {
  width: 800px;
  max-width: 95vw;
  max-height: 90vh;
  background-color: #0a0a0c;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.9), 0 0 0 1px rgba(255,255,255,0.05) inset;
  overflow-y: auto;
  overflow-x: hidden;
  font-family: 'Inter', 'Noto Sans TC', sans-serif;
  color: #e0e0e0;
  position: relative;
  display: flex;
  flex-direction: column;
}

/* é ‚éƒ¨ç™¼å…‰èƒŒæ™¯ */
.glow-bg {
  position: absolute;
  top: -100px;
  left: 50%;
  transform: translateX(-50%);
  width: 600px;
  height: 200px;
  background: radial-gradient(ellipse at center, rgba(234, 76, 137, 0.15) 0%, rgba(10, 10, 12, 0) 70%);
  pointer-events: none;
  z-index: 0;
}

/* Header */
.card-header {
  padding: 40px 40px 20px;
  text-align: center;
  position: relative;
  z-index: 1;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 20px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.75em;
  color: #a0a0a0;
  letter-spacing: 1px;
  margin-bottom: 16px;
}

.pulse-dot {
  width: 8px;
  height: 8px;
  background-color: #10b981;
  border-radius: 50%;
  box-shadow: 0 0 10px #10b981;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: scale(0.95); opacity: 0.8; }
  50% { transform: scale(1.1); opacity: 1; }
  100% { transform: scale(0.95); opacity: 0.8; }
}

.title { 
  margin: 0; 
  color: #fff; 
  font-weight: 600;
  font-size: 2.2em; 
  letter-spacing: -0.5px;
}

.subtitle { 
  color: #888; 
  font-size: 0.9em; 
  letter-spacing: 2px; 
  margin-top: 8px; 
  font-family: 'JetBrains Mono', monospace;
  text-transform: uppercase;
}

/* Feature Grid */
.features-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  padding: 0 40px 30px;
  position: relative;
  z-index: 1;
}

.feature-item {
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 24px;
  transition: all 0.3s ease;
}

.feature-item:hover {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
}

.feature-icon {
  font-size: 1.8em;
  margin-bottom: 16px;
  display: inline-block;
}

.demon-glow { text-shadow: 0 0 20px rgba(234, 76, 137, 0.6); }
.blue-glow { text-shadow: 0 0 20px rgba(77, 166, 255, 0.6); }
.green-glow { text-shadow: 0 0 20px rgba(16, 185, 129, 0.6); }
.purple-glow { text-shadow: 0 0 20px rgba(168, 85, 247, 0.6); }

.feature-title {
  margin: 0 0 8px 0;
  font-size: 1.05em;
  font-weight: 600;
  color: #fff;
}

.feature-desc {
  margin: 0;
  font-size: 0.85em;
  color: #999;
  line-height: 1.6;
}

/* System Status Board (Warnings & GitHub) */
.system-status-board {
  padding: 0 40px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.status-panel {
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  overflow: hidden;
}

.panel-header {
  padding: 10px 16px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.75em;
  font-weight: 700;
  letter-spacing: 1px;
  background: rgba(255, 255, 255, 0.02);
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.warning-panel .panel-header { color: #f59e0b; }
.action-panel .panel-header { color: #3b82f6; }

.panel-body {
  padding: 16px;
  font-size: 0.85em;
  color: #bbb;
  line-height: 1.5;
}

.highlight-text {
  color: #fca5a5;
}

.deploy-flex {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.github-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: #fff;
  color: #000;
  text-decoration: none;
  border-radius: 6px;
  font-weight: 600;
  font-size: 0.9em;
  transition: all 0.2s;
}

.github-btn:hover {
  background: #e0e0e0;
  transform: scale(1.02);
}

.hint-text {
  text-align: center;
  font-size: 0.8em;
  color: #666;
  padding: 24px 40px;
}
.highlight-pink { color: #ea4c89; }

/* Footer & CTA */
.card-footer {
  padding: 24px 40px;
  background: rgba(0, 0, 0, 0.4);
  border-top: 1px solid rgba(255, 255, 255, 0.05);
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: auto;
}

.dont-show-checkbox { 
  display: flex; 
  align-items: center; 
  gap: 8px; 
  cursor: pointer; 
  color: #666; 
  font-size: 0.85em; 
  user-select: none; 
  transition: color 0.2s; 
}
.dont-show-checkbox:hover { color: #999; }
.dont-show-checkbox input { accent-color: #ea4c89; cursor: pointer; }

/* Sleek Startup Button */
.startup-btn {
  background: #fff;
  color: #000;
  border: none;
  border-radius: 8px;
  padding: 12px 24px;
  font-family: 'JetBrains Mono', monospace;
  font-weight: 700;
  font-size: 0.9em;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.2s ease;
  box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
}

.startup-btn:hover {
  background: #ea4c89;
  color: #fff;
  box-shadow: 0 0 20px rgba(234, 76, 137, 0.4);
  transform: translateY(-1px);
}

.btn-icon {
  font-size: 1.2em;
  transition: transform 0.2s;
}

.startup-btn:hover .btn-icon {
  transform: translateX(4px);
}

/* Mobile Optimizations */
@media (max-width: 768px) {
  .features-grid { grid-template-columns: 1fr; }
  .deploy-flex { flex-direction: column; align-items: flex-start; gap: 12px; }
  .card-footer { flex-direction: column-reverse; gap: 20px; align-items: stretch; }
  .startup-btn { justify-content: center; }
  .card-header, .features-grid, .system-status-board, .card-footer { padding-left: 20px; padding-right: 20px; }
}
</style>